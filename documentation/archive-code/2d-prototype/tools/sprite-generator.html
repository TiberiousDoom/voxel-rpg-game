<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voxel RPG - Sprite Generator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      padding: 20px;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    }

    h1 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 32px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .section {
      margin-bottom: 40px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 2px solid #e9ecef;
    }

    .section h2 {
      color: #495057;
      margin-bottom: 20px;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sprite-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .sprite-item {
      background: white;
      padding: 15px;
      border-radius: 8px;
      border: 1px solid #dee2e6;
      text-align: center;
    }

    .sprite-item h3 {
      font-size: 14px;
      color: #495057;
      margin-bottom: 10px;
    }

    .sprite-preview {
      background: #fff;
      border: 2px solid #e9ecef;
      border-radius: 4px;
      margin: 10px 0;
      display: inline-block;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    .sprite-info {
      font-size: 11px;
      color: #6c757d;
      margin: 5px 0;
    }

    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 13px;
      transition: all 0.2s;
      margin: 5px;
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    button:active {
      transform: translateY(0);
    }

    .button-group {
      margin-top: 15px;
    }

    .generate-all {
      background: #28a745;
      padding: 15px 30px;
      font-size: 16px;
      margin: 20px 0;
    }

    .generate-all:hover {
      background: #218838;
    }

    .stats {
      background: #e7f3ff;
      padding: 15px;
      border-radius: 6px;
      margin: 20px 0;
      border-left: 4px solid #667eea;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin-top: 10px;
    }

    .stat-item {
      text-align: center;
    }

    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #667eea;
    }

    .stat-label {
      font-size: 12px;
      color: #666;
      margin-top: 5px;
    }

    .instructions {
      background: #fff3cd;
      border-left: 4px solid #ffc107;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
    }

    .instructions h3 {
      color: #856404;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .instructions ol {
      margin-left: 20px;
      color: #856404;
    }

    .instructions li {
      margin: 5px 0;
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }

      h1 {
        font-size: 24px;
      }

      .sprite-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé® Voxel RPG Sprite Generator</h1>
    <p class="subtitle">Generate placeholder sprites for testing the sprite system</p>

    <div class="instructions">
      <h3>üìù Instructions</h3>
      <ol>
        <li>Click "Generate All Sprites" to create all placeholder sprites</li>
        <li>Preview sprites will appear below with download buttons</li>
        <li>Click "Download" to save each sprite as PNG</li>
        <li>Place downloaded sprites in the appropriate <code>/public/assets/sprites/</code> folders</li>
      </ol>
    </div>

    <button class="generate-all" onclick="generateAllSprites()">
      ‚ú® Generate All Sprites
    </button>

    <div class="stats" id="stats" style="display: none;">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" id="npcCount">0</div>
          <div class="stat-label">NPC Sprites</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="buildingCount">0</div>
          <div class="stat-label">Building Sprites</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="playerCount">0</div>
          <div class="stat-label">Player Sprites</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="totalSize">0 KB</div>
          <div class="stat-label">Total Size</div>
        </div>
      </div>
    </div>

    <!-- NPC Sprites -->
    <div class="section">
      <h2>üë• NPC Sprites</h2>
      <div class="sprite-grid" id="npcSprites"></div>
    </div>

    <!-- Building Sprites -->
    <div class="section">
      <h2>üè† Building Sprites</h2>
      <div class="sprite-grid" id="buildingSprites"></div>
    </div>

    <!-- Player Sprites -->
    <div class="section">
      <h2>üéÆ Player Sprites</h2>
      <div class="sprite-grid" id="playerSprites"></div>
    </div>
  </div>

  <script>
    // Color definitions from npc-sprites.js
    const NPC_COLORS = {
      FARMER: { primary: '#4CAF50', secondary: '#81C784', letter: 'F' },
      GUARD: { primary: '#F44336', secondary: '#E57373', letter: 'G' },
      WORKER: { primary: '#2196F3', secondary: '#64B5F6', letter: 'W' },
      CRAFTSMAN: { primary: '#FF9800', secondary: '#FFB74D', letter: 'C' },
      MINER: { primary: '#9C27B0', secondary: '#BA68C8', letter: 'M' },
      MERCHANT: { primary: '#FFEB3B', secondary: '#FFF176', letter: 'T' }
    };

    const BUILDING_COLORS = {
      FARM: '#90EE90',
      HOUSE: '#D2B48C',
      WAREHOUSE: '#A9A9A9',
      TOWN_CENTER: '#FFD700',
      WATCHTOWER: '#8B4513',
      CAMPFIRE: '#FF8C00',
      MARKET: '#FFA500',
      CASTLE: '#8B4513'
    };

    const PLAYER_COLOR = '#4A90E2';

    let generatedSprites = {
      npc: 0,
      building: 0,
      player: 0,
      totalSize: 0
    };

    /**
     * Generate a single frame NPC sprite (idle)
     */
    function generateNPCIdle(role, color, letter) {
      const canvas = document.createElement('canvas');
      canvas.width = 16;
      canvas.height = 16;
      const ctx = canvas.getContext('2d');

      // Background circle
      ctx.fillStyle = color.primary;
      ctx.beginPath();
      ctx.arc(8, 8, 6, 0, Math.PI * 2);
      ctx.fill();

      // Border
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 1;
      ctx.stroke();

      // Letter
      ctx.fillStyle = '#FFF';
      ctx.font = 'bold 10px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(letter, 8, 8);

      return canvas;
    }

    /**
     * Generate a 4-frame animation sprite sheet
     */
    function generateNPCAnimation(role, color, letter, animType) {
      const canvas = document.createElement('canvas');
      canvas.width = 64; // 4 frames x 16px
      canvas.height = 16;
      const ctx = canvas.getContext('2d');

      for (let frame = 0; frame < 4; frame++) {
        const x = frame * 16;
        const offsetY = Math.sin((frame / 4) * Math.PI * 2) * 2; // Bounce effect

        // Draw circle
        ctx.fillStyle = color.primary;
        ctx.beginPath();
        ctx.arc(x + 8, 8 + offsetY, 6, 0, Math.PI * 2);
        ctx.fill();

        ctx.strokeStyle = '#000';
        ctx.lineWidth = 1;
        ctx.stroke();

        // Draw letter
        ctx.fillStyle = '#FFF';
        ctx.font = 'bold 10px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(letter, x + 8, 8 + offsetY);
      }

      return canvas;
    }

    /**
     * Generate building sprite
     */
    function generateBuilding(type, color) {
      const canvas = document.createElement('canvas');
      canvas.width = 40;
      canvas.height = 40;
      const ctx = canvas.getContext('2d');

      // Building body
      ctx.fillStyle = color;
      ctx.fillRect(5, 10, 30, 25);

      // Roof
      ctx.fillStyle = darkenColor(color, 0.7);
      ctx.beginPath();
      ctx.moveTo(20, 5);
      ctx.lineTo(35, 12);
      ctx.lineTo(5, 12);
      ctx.closePath();
      ctx.fill();

      // Door
      ctx.fillStyle = darkenColor(color, 0.5);
      ctx.fillRect(15, 23, 10, 12);

      // Window
      ctx.fillStyle = '#87CEEB';
      ctx.fillRect(10, 15, 6, 6);
      ctx.fillRect(24, 15, 6, 6);

      // Border
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 1;
      ctx.strokeRect(5, 10, 30, 25);

      // Type label
      ctx.fillStyle = '#000';
      ctx.font = 'bold 8px Arial';
      ctx.textAlign = 'center';
      ctx.fillText(type.substring(0, 4), 20, 38);

      return canvas;
    }

    /**
     * Generate player sprite (idle - single frame)
     */
    function generatePlayerIdle() {
      const canvas = document.createElement('canvas');
      canvas.width = 16;
      canvas.height = 16;
      const ctx = canvas.getContext('2d');

      // Player circle (larger than NPCs)
      ctx.fillStyle = PLAYER_COLOR;
      ctx.beginPath();
      ctx.arc(8, 8, 7, 0, Math.PI * 2);
      ctx.fill();

      // White outline
      ctx.strokeStyle = '#FFF';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Black border
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 1;
      ctx.stroke();

      // Star symbol
      ctx.fillStyle = '#FFD700';
      ctx.font = 'bold 8px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('‚òÖ', 8, 8);

      return canvas;
    }

    /**
     * Generate player animation (walk/sprint)
     */
    function generatePlayerAnimation(animType) {
      const canvas = document.createElement('canvas');
      canvas.width = 64; // 4 frames x 16px
      canvas.height = 16;
      const ctx = canvas.getContext('2d');

      const isSprint = animType === 'sprint';

      for (let frame = 0; frame < 4; frame++) {
        const x = frame * 16;
        const bounceAmount = isSprint ? 3 : 2;
        const offsetY = Math.sin((frame / 4) * Math.PI * 2) * bounceAmount;

        // Player circle
        ctx.fillStyle = PLAYER_COLOR;
        ctx.beginPath();
        ctx.arc(x + 8, 8 + offsetY, 7, 0, Math.PI * 2);
        ctx.fill();

        // White outline
        ctx.strokeStyle = '#FFF';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Black border
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 1;
        ctx.stroke();

        // Star symbol
        ctx.fillStyle = '#FFD700';
        ctx.font = 'bold 8px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText('‚òÖ', x + 8, 8 + offsetY);

        // Sprint effect (motion lines)
        if (isSprint && frame > 0) {
          ctx.strokeStyle = 'rgba(74, 144, 226, 0.5)';
          ctx.lineWidth = 1;
          ctx.beginPath();
          ctx.moveTo(x + 2, 8);
          ctx.lineTo(x - 2, 8);
          ctx.stroke();
        }
      }

      return canvas;
    }

    /**
     * Darken a hex color
     */
    function darkenColor(hex, factor) {
      const r = Math.floor(parseInt(hex.slice(1, 3), 16) * factor);
      const g = Math.floor(parseInt(hex.slice(3, 5), 16) * factor);
      const b = Math.floor(parseInt(hex.slice(5, 7), 16) * factor);
      return `rgb(${r}, ${g}, ${b})`;
    }

    /**
     * Create sprite item UI
     */
    function createSpriteItem(name, canvas, path, description) {
      const div = document.createElement('div');
      div.className = 'sprite-item';

      const title = document.createElement('h3');
      title.textContent = name;
      div.appendChild(title);

      const preview = canvas.cloneNode();
      preview.className = 'sprite-preview';
      preview.style.width = `${canvas.width * 4}px`;
      preview.style.height = `${canvas.height * 4}px`;
      div.appendChild(preview);

      const info = document.createElement('div');
      info.className = 'sprite-info';
      info.textContent = description;
      div.appendChild(info);

      const buttonGroup = document.createElement('div');
      buttonGroup.className = 'button-group';

      const downloadBtn = document.createElement('button');
      downloadBtn.textContent = '‚¨á Download';
      downloadBtn.onclick = () => downloadCanvas(canvas, `${path}.png`);
      buttonGroup.appendChild(downloadBtn);

      div.appendChild(buttonGroup);

      return div;
    }

    /**
     * Download canvas as PNG
     */
    function downloadCanvas(canvas, filename) {
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        a.click();
        URL.revokeObjectURL(url);

        // Update stats
        generatedSprites.totalSize += blob.size;
        updateStats();
      });
    }

    /**
     * Generate all NPC sprites
     */
    function generateNPCSprites() {
      const container = document.getElementById('npcSprites');
      container.innerHTML = '';

      // Only generate FARMER for testing
      const role = 'FARMER';
      const color = NPC_COLORS[role];

      // Idle
      const idle = generateNPCIdle(role, color, color.letter);
      container.appendChild(createSpriteItem(
        `${role} - Idle`,
        idle,
        `npcs/farmer/idle`,
        '16x16 (1 frame)'
      ));

      // Walk
      const walk = generateNPCAnimation(role, color, color.letter, 'walk');
      container.appendChild(createSpriteItem(
        `${role} - Walk`,
        walk,
        `npcs/farmer/walk`,
        '64x16 (4 frames)'
      ));

      // Work
      const work = generateNPCAnimation(role, color, color.letter, 'work');
      container.appendChild(createSpriteItem(
        `${role} - Work`,
        work,
        `npcs/farmer/work`,
        '64x16 (4 frames)'
      ));

      generatedSprites.npc += 3;
    }

    /**
     * Generate all building sprites
     */
    function generateBuildingSprites() {
      const container = document.getElementById('buildingSprites');
      container.innerHTML = '';

      // Only generate FARM for testing
      const type = 'FARM';
      const color = BUILDING_COLORS[type];

      const canvas = generateBuilding(type, color);
      container.appendChild(createSpriteItem(
        type,
        canvas,
        `buildings/farm`,
        '40x40 (1 frame)'
      ));

      generatedSprites.building += 1;
    }

    /**
     * Generate all player sprites
     */
    function generatePlayerSprites() {
      const container = document.getElementById('playerSprites');
      container.innerHTML = '';

      // Idle
      const idle = generatePlayerIdle();
      container.appendChild(createSpriteItem(
        'Player - Idle',
        idle,
        'player/idle',
        '16x16 (1 frame)'
      ));

      // Walk
      const walk = generatePlayerAnimation('walk');
      container.appendChild(createSpriteItem(
        'Player - Walk',
        walk,
        'player/walk',
        '64x16 (4 frames)'
      ));

      // Sprint
      const sprint = generatePlayerAnimation('sprint');
      container.appendChild(createSpriteItem(
        'Player - Sprint',
        sprint,
        'player/sprint',
        '64x16 (4 frames)'
      ));

      generatedSprites.player += 3;
    }

    /**
     * Generate all sprites
     */
    function generateAllSprites() {
      // Reset counters
      generatedSprites = { npc: 0, building: 0, player: 0, totalSize: 0 };

      generateNPCSprites();
      generateBuildingSprites();
      generatePlayerSprites();

      document.getElementById('stats').style.display = 'block';
      updateStats();
    }

    /**
     * Update statistics display
     */
    function updateStats() {
      document.getElementById('npcCount').textContent = generatedSprites.npc;
      document.getElementById('buildingCount').textContent = generatedSprites.building;
      document.getElementById('playerCount').textContent = generatedSprites.player;
      document.getElementById('totalSize').textContent =
        (generatedSprites.totalSize / 1024).toFixed(1) + ' KB';
    }
  </script>
</body>
</html>
